{"ast":null,"code":"var _jsxFileName = \"/Users/phe/WebstormProjects/lululemon-latest-version/lulu-front/lululemon/src/components/mainPageComponents/Product/SortingTabs.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport { useDispatch, useSelector } from \"react-redux\";\nimport actions from \"../../../actions\";\nimport { useNavigate } from \"react-router-dom\";\nimport './SortingTabs.scss';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst SortingTabs = () => {\n  _s();\n  var _products$pageParams, _products$products;\n  //////////////////////////////// SortTab ////////////////////////////////\n  // handle sort tab name\n  const menuRef = useRef(null);\n  const [sortTab, setSortTab] = useState('Featured');\n  // handle toggle state\n  const [isOn, setIsOn] = useState(false);\n  const [toggleName, setToggleName] = useState('hide');\n\n  // toggle function to display/hide the sorting tab\n  // it checks if the click happened outside of a specified element (in this case, the menuRef element),\n  // and if so, it sets isOn state to false. Otherwise, it toggles the isOn state to true or false depending on its\n  // current value. It also updates the toggleName state depending on the value of isOn. Finally, it removes the event\n  // listener when the component unmounts.\n  useEffect(() => {\n    const toggleFunc = evt => {\n      if (menuRef.current && !menuRef.current.contains(evt.target)) {\n        setIsOn(false);\n      } else {\n        setIsOn(isOn => !isOn);\n      }\n    };\n    document.addEventListener('click', toggleFunc);\n    isOn ? setToggleName('display') : setToggleName('hide');\n    return () => {\n      document.removeEventListener('click', toggleFunc);\n    };\n  });\n\n  ////////////////////////////////////////////////////////////////////////\n\n  // get data from the global store\n  const products = useSelector(state => {\n    var _state$productReducer;\n    return state === null || state === void 0 ? void 0 : (_state$productReducer = state.productReducer) === null || _state$productReducer === void 0 ? void 0 : _state$productReducer.pageProducts;\n  });\n  const urlParams = useSelector(state => {\n    var _state$productReducer2;\n    return state === null || state === void 0 ? void 0 : (_state$productReducer2 = state.productReducer) === null || _state$productReducer2 === void 0 ? void 0 : _state$productReducer2.params;\n  });\n  let filters = useSelector(state => {\n    var _state$productReducer3;\n    return state === null || state === void 0 ? void 0 : (_state$productReducer3 = state.productReducer) === null || _state$productReducer3 === void 0 ? void 0 : _state$productReducer3.filters;\n  });\n  const page = urlParams.pageNum;\n  const sortingId = urlParams.sortingId;\n\n  ////////////////////////////////////////////////////////////////////////\n  // Fetch all products with page and sorting\n  const dispatch = useDispatch();\n  const [isLoading, setLoading] = useState(true);\n  useEffect(() => {\n    var _actions$productActio;\n    dispatch(actions === null || actions === void 0 ? void 0 : (_actions$productActio = actions.productActions) === null || _actions$productActio === void 0 ? void 0 : _actions$productActio.fetchProductsPageSorting(page, sortingId)).then(() => setLoading(false));\n  }, [page, sortingId]);\n  const navigate = useNavigate();\n  // handle sorting changes, change sortingId\n  const handleSortChange = sortingId => {\n    var _actions$filterAction;\n    actions === null || actions === void 0 ? void 0 : (_actions$filterAction = actions.filterActions) === null || _actions$filterAction === void 0 ? void 0 : _actions$filterAction.changeSortId(dispatch)(sortingId).then(() => setLoading(false));\n    navigate(`/mainPage/${sortingId}/1`);\n  };\n  return isLoading ? /*#__PURE__*/_jsxDEV(\"div\", {\n    children: \"Loading...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 66,\n    columnNumber: 24\n  }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"sortingTabs\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"sortingTabs_left\",\n        children: [!!products && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"options\",\n          children: `All Items (${!!(products !== null && products !== void 0 && products.pageParams) ? products === null || products === void 0 ? void 0 : (_products$pageParams = products.pageParams) === null || _products$pageParams === void 0 ? void 0 : _products$pageParams.totalProducts : (_products$products = products.products) === null || _products$products === void 0 ? void 0 : _products$products.length})`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"options\",\n          children: \"Available Near You\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"sortingTabs_right\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"dropdown\",\n          ref: menuRef,\n          children: [/*#__PURE__*/_jsxDEV(\"a\", {\n            className: \"sort-by\",\n            children: [\"Sort by:  \", sortTab]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: toggleName,\n            children: /*#__PURE__*/_jsxDEV(\"ul\", {\n              children: [/*#__PURE__*/_jsxDEV(\"li\", {\n                id: \"1\",\n                \"data-id\": \"1\",\n                onClick: () => {\n                  setSortTab('Featured');\n                  handleSortChange('1');\n                },\n                children: \" Featured \"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 83,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                id: \"2\",\n                \"data-id\": \"2\",\n                onClick: () => {\n                  setSortTab('New Arrivals ');\n                  handleSortChange('2');\n                },\n                children: \" New Arrivals \"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 89,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                id: \"3\",\n                \"data-id\": \"3\",\n                onClick: () => {\n                  setSortTab('Top rated');\n                  handleSortChange('3');\n                },\n                children: \" Top rated \"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 95,\n                columnNumber: 29\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 82,\n              columnNumber: 25\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true);\n};\n_s(SortingTabs, \"b4jsoL5GWW0vv3w4jzf08yBkWl0=\", false, function () {\n  return [useSelector, useSelector, useSelector, useDispatch, useNavigate];\n});\n_c = SortingTabs;\nexport default SortingTabs;\nvar _c;\n$RefreshReg$(_c, \"SortingTabs\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useDispatch","useSelector","actions","useNavigate","SortingTabs","menuRef","sortTab","setSortTab","isOn","setIsOn","toggleName","setToggleName","toggleFunc","evt","current","contains","target","document","addEventListener","removeEventListener","products","state","productReducer","pageProducts","urlParams","params","filters","page","pageNum","sortingId","dispatch","isLoading","setLoading","productActions","fetchProductsPageSorting","then","navigate","handleSortChange","filterActions","changeSortId","pageParams","totalProducts","length"],"sources":["/Users/phe/WebstormProjects/lululemon-latest-version/lulu-front/lululemon/src/components/mainPageComponents/Product/SortingTabs.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { useDispatch, useSelector } from \"react-redux\";\nimport actions from \"../../../actions\";\nimport { useNavigate } from \"react-router-dom\";\nimport './SortingTabs.scss'\n\nconst SortingTabs = () => {\n    //////////////////////////////// SortTab ////////////////////////////////\n    // handle sort tab name\n    const menuRef = useRef(null)\n    const [sortTab, setSortTab]  = useState('Featured')\n    // handle toggle state\n    const [isOn, setIsOn] = useState(false)\n    const [toggleName, setToggleName] = useState('hide')\n\n    // toggle function to display/hide the sorting tab\n    // it checks if the click happened outside of a specified element (in this case, the menuRef element),\n    // and if so, it sets isOn state to false. Otherwise, it toggles the isOn state to true or false depending on its\n    // current value. It also updates the toggleName state depending on the value of isOn. Finally, it removes the event\n    // listener when the component unmounts.\n    useEffect(() => {\n        const toggleFunc = (evt) => {\n            if (menuRef.current && !menuRef.current.contains(evt.target)) {\n                setIsOn(false);\n            } else {\n                setIsOn(isOn => !isOn);\n            }\n        };\n        document.addEventListener('click', toggleFunc)\n        isOn ? setToggleName('display') : setToggleName('hide')\n        return () => {\n            document.removeEventListener('click', toggleFunc)\n        }\n    })\n\n    ////////////////////////////////////////////////////////////////////////\n\n    // get data from the global store\n    const products = useSelector(state => state?.productReducer?.pageProducts)\n    const urlParams = useSelector(state => state?.productReducer?.params)\n    let filters = useSelector(state => state?.productReducer?.filters)\n\n    const page = urlParams.pageNum;\n    const sortingId = urlParams.sortingId;\n\n    ////////////////////////////////////////////////////////////////////////\n    // Fetch all products with page and sorting\n    const dispatch = useDispatch();\n    const [isLoading, setLoading] = useState(true)\n    useEffect( () => {\n        dispatch(actions?.productActions?.fetchProductsPageSorting(page, sortingId))\n            .then(()=> setLoading( false))\n    },[page, sortingId]);\n\n    const navigate = useNavigate();\n    // handle sorting changes, change sortingId\n    const handleSortChange = (sortingId) => {\n        actions?.filterActions?.changeSortId(dispatch)(sortingId)\n            .then(()=> setLoading( false))\n\n        navigate(`/mainPage/${sortingId}/1`);\n\n    }\n\n\n    return isLoading ? <div>Loading...</div> : (\n        <>\n            <div className=\"sortingTabs\">\n                <div className=\"sortingTabs_left\">\n                {\n                    !!products &&\n                    <div className=\"options\">\n                        {`All Items (${!!products?.pageParams ? products?.pageParams?.totalProducts : products.products?.length})`}\n                    </div>\n                }\n                <div className=\"options\">Available Near You</div>\n                </div>\n                <div className=\"sortingTabs_right\">\n                <div className='dropdown' ref={menuRef}>\n                    <a className='sort-by'>Sort by:  {sortTab}</a>\n                    <div className={toggleName}>\n                        <ul>\n                            <li id='1'\n                                data-id='1'\n                                onClick={()=> {\n                                    setSortTab('Featured')\n                                    handleSortChange('1')\n                                }}> Featured </li>\n                            <li id='2'\n                                data-id='2'\n                                onClick={()=> {\n                                    setSortTab('New Arrivals ')\n                                    handleSortChange('2')\n                                }}> New Arrivals </li>\n                            <li id='3'\n                                data-id='3'\n                                onClick={()=> {\n                                    setSortTab('Top rated')\n                                    handleSortChange('3')\n                                }}> Top rated </li>\n                        </ul>\n                    </div>\n                </div>\n                </div>\n\n            </div>\n            <hr/>\n        </>\n    );\n};\n\nexport default SortingTabs;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}