{"ast":null,"code":"import axios from \"axios\";\nimport { actionType, FETCH_ALL_URL, GET_FILTERS_URL } from \"../Helper\";\nimport { logDOM } from \"@testing-library/react\";\n//  implicit return statement\n\n// In this case, it is common to put dispatch second in the argument list,\n// after the URL. This is because the URL is specific to the getFilters function\n// and is not required for all Thunks, while dispatch is required for all Thunks.\n//\nconst getFilters = () => async dispatch => {\n  try {\n    const response = await axios.get(GET_FILTERS_URL);\n    // console.log(response)\n    const data = response === null || response === void 0 ? void 0 : response.data;\n    // console.log('[redux thunk dispatch] get filters', data)\n    dispatch({\n      type: actionType.GET_FILTERS,\n      payload: data.rs\n    });\n  } catch (e) {\n    console.log('[Get filters error]', e);\n  }\n};\n\n// 1. dispatch is the first argument used, ele is the second argument (inner argument) for dispatch when the returned function is invoked.\n// 2. The function updateFilter returns a Promise, but it does not use await to wait for any asynchronous operations to\n//    complete before dispatching the action.\n\nconst updateFilter = dispatch => async ele => {\n  try {\n    dispatch({\n      type: actionType.UPDATE_FILTERS,\n      payload: ele\n    });\n    return true;\n  } catch (e) {\n    console.log('[Change filters error]', e);\n    return false;\n  }\n};\n\n// Store pageNum and sortingId to the global store\nconst urlParamsSaver = dispatch => async (pageNum, sortingId) => {\n  try {\n    dispatch({\n      type: actionType.URL_PARAMS_SAVER,\n      payload: {\n        pageNum,\n        sortingId\n      }\n    });\n    return true;\n  } catch (e) {\n    console.log('[Save URL params error]', e);\n    return false;\n  }\n};\n// todo:\n// 1. 添加更新后的filter给action creators，这样就可以保证状态一致\n// 2。同样的方法做一个pagination的action creator，发送 pageNum 和 filter\n// Change sortingId\nconst changeSortId = dispatch => async sortingId => {\n  try {\n    dispatch({\n      type: actionType.SORT_ID,\n      payload: sortingId\n    });\n    return true;\n  } catch (e) {\n    console.log('[Save URL params error]', e);\n    return false;\n  }\n};\nexport default {\n  getFilters,\n  updateFilter,\n  urlParamsSaver,\n  changeSortId\n};","map":{"version":3,"names":["axios","actionType","FETCH_ALL_URL","GET_FILTERS_URL","logDOM","getFilters","dispatch","response","get","data","type","GET_FILTERS","payload","rs","e","console","log","updateFilter","ele","UPDATE_FILTERS","urlParamsSaver","pageNum","sortingId","URL_PARAMS_SAVER","changeSortId","SORT_ID"],"sources":["/Users/phe/WebstormProjects/lululemon-latest-version/lulu-front/lululemon/src/actions/filterActions.js"],"sourcesContent":["import axios from \"axios\";\nimport {actionType, FETCH_ALL_URL, GET_FILTERS_URL} from \"../Helper\";\nimport { logDOM } from \"@testing-library/react\";\n//  implicit return statement\n\n// In this case, it is common to put dispatch second in the argument list,\n// after the URL. This is because the URL is specific to the getFilters function\n// and is not required for all Thunks, while dispatch is required for all Thunks.\n//\nconst getFilters = () => async dispatch  => {\n    try {\n        const response = await axios.get(GET_FILTERS_URL)\n        // console.log(response)\n        const data = response?.data;\n        // console.log('[redux thunk dispatch] get filters', data)\n        dispatch({\n            type: actionType.GET_FILTERS,\n            payload: data.rs\n        })\n    } catch (e) {\n        console.log('[Get filters error]',e)\n    }\n}\n\n\n// 1. dispatch is the first argument used, ele is the second argument (inner argument) for dispatch when the returned function is invoked.\n// 2. The function updateFilter returns a Promise, but it does not use await to wait for any asynchronous operations to\n//    complete before dispatching the action.\n\nconst updateFilter = (dispatch) => async (ele) => {\n    try {\n        dispatch({\n            type:actionType.UPDATE_FILTERS,\n            payload:ele\n        })\n        return true\n    }catch (e) {\n        console.log('[Change filters error]', e)\n        return false\n    }\n}\n\n// Store pageNum and sortingId to the global store\nconst urlParamsSaver = (dispatch) => async (pageNum, sortingId) => {\n    try {\n        dispatch({\n            type: actionType.URL_PARAMS_SAVER,\n            payload: {pageNum, sortingId}\n        })\n        return true\n    } catch (e) {\n        console.log('[Save URL params error]', e)\n        return false\n    }\n}\n// todo:\n// 1. 添加更新后的filter给action creators，这样就可以保证状态一致\n// 2。同样的方法做一个pagination的action creator，发送 pageNum 和 filter\n// Change sortingId\nconst changeSortId = (dispatch) => async (sortingId) => {\n    try {\n        dispatch({\n            type: actionType.SORT_ID,\n            payload: sortingId\n        })\n        return true\n    } catch (e) {\n        console.log('[Save URL params error]', e)\n        return false\n    }\n}\n\n\nexport default {\n    getFilters,\n    updateFilter,\n    urlParamsSaver,\n    changeSortId\n}"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAAQC,UAAU,EAAEC,aAAa,EAAEC,eAAe,QAAO,WAAW;AACpE,SAASC,MAAM,QAAQ,wBAAwB;AAC/C;;AAEA;AACA;AACA;AACA;AACA,MAAMC,UAAU,GAAG,MAAM,MAAMC,QAAQ,IAAK;EACxC,IAAI;IACA,MAAMC,QAAQ,GAAG,MAAMP,KAAK,CAACQ,GAAG,CAACL,eAAe,CAAC;IACjD;IACA,MAAMM,IAAI,GAAGF,QAAQ,aAARA,QAAQ,uBAARA,QAAQ,CAAEE,IAAI;IAC3B;IACAH,QAAQ,CAAC;MACLI,IAAI,EAAET,UAAU,CAACU,WAAW;MAC5BC,OAAO,EAAEH,IAAI,CAACI;IAClB,CAAC,CAAC;EACN,CAAC,CAAC,OAAOC,CAAC,EAAE;IACRC,OAAO,CAACC,GAAG,CAAC,qBAAqB,EAACF,CAAC,CAAC;EACxC;AACJ,CAAC;;AAGD;AACA;AACA;;AAEA,MAAMG,YAAY,GAAIX,QAAQ,IAAK,MAAOY,GAAG,IAAK;EAC9C,IAAI;IACAZ,QAAQ,CAAC;MACLI,IAAI,EAACT,UAAU,CAACkB,cAAc;MAC9BP,OAAO,EAACM;IACZ,CAAC,CAAC;IACF,OAAO,IAAI;EACf,CAAC,QAAOJ,CAAC,EAAE;IACPC,OAAO,CAACC,GAAG,CAAC,wBAAwB,EAAEF,CAAC,CAAC;IACxC,OAAO,KAAK;EAChB;AACJ,CAAC;;AAED;AACA,MAAMM,cAAc,GAAId,QAAQ,IAAK,OAAOe,OAAO,EAAEC,SAAS,KAAK;EAC/D,IAAI;IACAhB,QAAQ,CAAC;MACLI,IAAI,EAAET,UAAU,CAACsB,gBAAgB;MACjCX,OAAO,EAAE;QAACS,OAAO;QAAEC;MAAS;IAChC,CAAC,CAAC;IACF,OAAO,IAAI;EACf,CAAC,CAAC,OAAOR,CAAC,EAAE;IACRC,OAAO,CAACC,GAAG,CAAC,yBAAyB,EAAEF,CAAC,CAAC;IACzC,OAAO,KAAK;EAChB;AACJ,CAAC;AACD;AACA;AACA;AACA;AACA,MAAMU,YAAY,GAAIlB,QAAQ,IAAK,MAAOgB,SAAS,IAAK;EACpD,IAAI;IACAhB,QAAQ,CAAC;MACLI,IAAI,EAAET,UAAU,CAACwB,OAAO;MACxBb,OAAO,EAAEU;IACb,CAAC,CAAC;IACF,OAAO,IAAI;EACf,CAAC,CAAC,OAAOR,CAAC,EAAE;IACRC,OAAO,CAACC,GAAG,CAAC,yBAAyB,EAAEF,CAAC,CAAC;IACzC,OAAO,KAAK;EAChB;AACJ,CAAC;AAGD,eAAe;EACXT,UAAU;EACVY,YAAY;EACZG,cAAc;EACdI;AACJ,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}